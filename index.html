<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Diana & Ubaldo ‚Äî Wedding Invitation</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css?v=6" />
  <meta name="theme-color" content="#cfa6b8" />
  <meta name="color-scheme" content="light only">
  <meta name="description" content="You're invited to our wedding ‚Äî Save the date and RSVP." />
</head>
<body>

  <!-- Hero (names only) -->
  <section id="hero" class="snap">
    <h1>Diana &amp; Ubaldo</h1>
    <p class="subtext">Join us in celebrating our wedding</p>
    <a class="scroll-indicator" href="#save-the-date" aria-label="Scroll to Save the Date">‚åÑ</a>
  </section>

  <!-- Save the Date (full screen background image) -->
  <section id="save-the-date" class="snap">
    <div class="overlay">
      <h2>Save the Date</h2>
      <p class="date">December 20</p>
    </div>
  </section>

  <!-- Event Details (buttons open in Maps app) -->
  <section id="details">
    <h2>Event Details</h2>

    <div class="event">
      <h3>üíí Ceremony</h3>
      <p><strong>Time:</strong> 15:30 PM</p>
      <p><strong>Location:</strong> Parroquia Inmaculada Concepci√≥n de Mar√≠a</p>
      <a class="map-btn" href="https://maps.app.goo.gl/bEymWp8KyF2xSq7z8" target="_blank" rel="noopener">Open in Maps</a>
    </div>

    <div class="event">
      <h3>üéâ Reception</h3>
      <p><strong>Time:</strong> 17:30 PM</p>
      <p><strong>Location:</strong> Quinta Fidelina Orellana</p>
      <a class="map-btn" href="https://maps.app.goo.gl/ZB2EzFZVugiD3U3e8" target="_blank" rel="noopener">Open in Maps</a>
    </div>
  </section>

  <!-- Itinerary -->
  <section id="itinerary">
    <h2>Itinerary</h2>
    <ol class="timeline">
      <li>
        <div class="time">15:30</div>
        <div class="dot" aria-hidden="true">
          <!-- ring -->
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6">
            <circle cx="12" cy="14" r="6"></circle>
            <path d="M9 7h6l-1.6-2.2a1 1 0 0 0-.8-.4h-1.2a1 1 0 0 0-.8.4L9 7z"></path>
          </svg>
        </div>
        <div class="card">
          <h3>Ceremony</h3>
          <p>Parroquia Inmaculada Concepci√≥n de Mar√≠a</p>
        </div>
      </li>

      <li>
        <div class="time">18:00</div>
        <div class="dot" aria-hidden="true">
          <!-- champagne -->
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6">
            <path d="M8 3h8l-1 6a5 5 0 0 1-6 0L8 3z"></path><path d="M12 9v11"></path>
          </svg>
        </div>
        <div class="card">
          <h3>Reception</h3>
          <p>Quinta Fidelina Orellana</p>
        </div>
      </li>

      <li>
        <div class="time">19:00</div>
        <div class="dot" aria-hidden="true">
          <!-- dinner cloche -->
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6">
            <path d="M3 17h18"></path><path d="M6 17a6 6 0 1 1 12 0"></path><path d="M12 7v-1"></path>
          </svg>
        </div>
        <div class="card">
          <h3>Dinner</h3>
          <p>Bon app√©tit</p>
        </div>
      </li>

      <li>
        <div class="time">20:30</div>
        <div class="dot" aria-hidden="true">
          <!-- music -->
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6">
            <path d="M9 18a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm6-12v12"></path><path d="M15 6l6-2v12"></path>
          </svg>
        </div>
        <div class="card">
          <h3>First Dance</h3>
          <p>Join us on the dance floor</p>
        </div>
      </li>

      <li>
        <div class="time">21:00</div>
        <div class="dot" aria-hidden="true">
          <!-- sparkles -->
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6">
            <path d="M12 2v4M12 18v4M2 12h4M18 12h4M4.9 4.9l2.8 2.8M16.3 16.3l2.8 2.8M4.9 19.1l2.8-2.8M16.3 7.7l2.8-2.8"/>
          </svg>
        </div>
        <div class="card">
          <h3>Party</h3>
          <p>Let‚Äôs celebrate!</p>
        </div>
      </li>
    </ol>
  </section>

  <!-- Dress Code -->
  <section id="dresscode">
    <h2>Dress Code</h2>
    <div class="dc-row">
      <div class="dc-icon" aria-hidden="true">
        <!-- hanger -->
        <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor" stroke-width="1.6">
          <path d="M8 7a4 4 0 1 1 8 0c0 1.5-1 2.1-2.2 2.8-.9.5-1.8 1.2-1.8 2.2"></path>
          <path d="M3 17l9-6 9 6"></path>
        </svg>
      </div>
      <div class="dc-text">
        <p><strong>Formal.</strong> Please consider this winter pastel palette:</p>
      </div>
    </div>

    <!-- Winter Pastel Palette (no black/white/red) -->
    <div class="palette" role="list">
      <span role="listitem" class="swatch" style="--c:#A7BED3" title="Dusty Blue"></span>
      <span role="listitem" class="swatch" style="--c:#C6B7D2" title="Lavender Gray"></span>
      <span role="listitem" class="swatch" style="--c:#B5CDA3" title="Soft Sage"></span>
      <span role="listitem" class="swatch" style="--c:#E7C8D5" title="Blush Pink"></span>
      <span role="listitem" class="swatch" style="--c:#E6D5B8" title="Champagne Gold"></span>
    </div>
  </section>

  <!-- RSVP -->
  <section id="rsvp">
    <h2>RSVP</h2>
    <p>Please confirm your attendance by <strong>December 1</strong>.</p>
    <div class="buttons">
      <button class="yes">‚úÖ I will attend</button>
      <button class="no">‚ùå I can‚Äôt attend</button>
    </div>
  </section>

  <footer>
    <p>Made with ‚ù§Ô∏è for our wedding celebration</p>
  </footer>

  <!-- Invitation Key Logic + Prefilled Form Redirect -->
  <script>
  (async () => {
    // === CONFIG: Replace with your real Google Form IDs ===
    const FORM_BASE = "https://docs.google.com/forms/d/e/REPLACE_FORM_ID/viewform";
    const ENTRY_DESC = "entry.111111";  // your Google Form field id for "Invitation for"
    const ENTRY_QTY  = "entry.222222";  // your Google Form field id for "Qty allowed"
    const ENTRY_KEY  = "entry.333333";  // optional: store the key used

    const params = new URLSearchParams(window.location.search);
    const key = params.get("k");

    const rsvpSection = document.querySelector("#rsvp");
    const yesBtn = rsvpSection?.querySelector(".yes");
    const noBtn  = rsvpSection?.querySelector(".no");

    // info line above buttons
    const info = document.createElement("p");
    info.style.marginTop = "8px";
    info.style.fontWeight = "600";
    rsvpSection.insertBefore(info, rsvpSection.querySelector(".buttons"));

    // load invitations.json (in repo root)
    let map;
    try {
      const res = await fetch("invitations.json?v=1", { cache: "no-store" });
      if (!res.ok) throw new Error("Fetch error");
      const data = await res.json();
      map = data.invitations || {};
    } catch (e) {
      info.textContent = "We couldn't load your invitation right now. Please try again.";
      if (yesBtn) yesBtn.disabled = true;
      if (noBtn)  noBtn.disabled  = true;
      return;
    }

    const inv = key && map[key];
    if (!inv) {
      info.textContent = "Invitation not found. Please use your personal link.";
      if (yesBtn) yesBtn.disabled = true;
      if (noBtn)  noBtn.disabled  = true;
      return;
    }

    info.textContent = `${inv.description} ‚Äî ${inv.qty} ${inv.qty === 1 ? 'person' : 'persons'} allowed`;

    function buildFormURL(attending) {
      const u = new URL(FORM_BASE);
      u.searchParams.set("usp", "pp_url");
      u.searchParams.set(ENTRY_DESC, inv.description);
      u.searchParams.set(ENTRY_QTY, String(inv.qty));
      u.searchParams.set(ENTRY_KEY, key);
      // If you add an "Attending?" field in your form, also pass it:
      // u.searchParams.set("entry.444444", attending ? "Yes" : "No");
      return u.toString();
    }

    yesBtn?.addEventListener("click", () => window.location.href = buildFormURL(true));
    noBtn ?.addEventListener("click", () => window.location.href = buildFormURL(false));
  })();
  </script>
</body>
</html>
